const e=e=>{let t=new Date(e);return{month:t.toLocaleDateString("en-US",{month:"short"}),day:t.toLocaleDateString("en-US",{day:"2-digit"}),weekDay:t.toLocaleDateString("en-US",{weekday:"long"}),shortWeekDay:t.toLocaleDateString("en-US",{weekday:"short"}),hour:t.toLocaleDateString("en-US",{hour:"2-digit"})}},t=e=>{let t=e.split(" ");return{date:t[0],time:t[1]}};let a={weekForecast:{},dayForecast:{},hourForecast:{},record:{}};const r=async function(r){try{let n=await fetch(`https://api.weatherapi.com/v1/forecast.json?key=b29ab3c86c1b4ec6a0c144601250608&q=${r}&days=7&aqi=yes&alerts=yes`);if(!n.ok){let e=`${r} not found. Please enter a valid city name.`;throw 401===n.status||403===n.status?e="Invalid API Key or Access Forbidden.":429===n.status?e="Too Many Requests. Please try again later.":n.status>=500&&(e="Server Error. Please try again later."),Error(e)}let o=await n.json();if(!o.location||!o.forecast||!o.current)throw Error("Invalid API data received");let i=new Date(o.location.localtime).getHours();return a.weekForecast=o.forecast.forecastday,a.dayForecast=a.weekForecast[0],a.hourForecast=a.dayForecast.hour[i],a.record={realHour:i,alerts:o.alerts?.[0]||null,location:{country:o.location.country,region:o.location.region,city:o.location.name,latitude:o.location.lat,longitude:o.location.lon,localTime:o.location.localtime,curDate:t(o.location.localtime).date,curMonth:e(o.location.localtime).month,curDay:e(o.location.localtime).day,curWeekDay:e(o.location.localtime).weekDay,curTime:t(o.location.localtime).time,localTimeEpoch:o.location.localtime_epoch,timeZone:o.location.tz_id},current:o.current,forecast:o.forecast.forecastday,date:a.dayForecast.date,dateEpoch:a.dayForecast.date_epoch,sunrise:a.dayForecast.astro.sunrise,sunset:a.dayForecast.astro.sunset,curText:a.dayForecast.day.condition.text,curIcon:a.dayForecast.day.condition.icon,curCode:a.dayForecast.day.condition.code,maxTempC:a.dayForecast.day.maxtemp_c,minTempC:a.dayForecast.day.mintemp_c,maxTempF:a.dayForecast.day.maxtemp_f,minTempF:a.dayForecast.day.mintemp_f,aqi:{co:a.hourForecast.air_quality.co,no2:a.hourForecast.air_quality.no2,so2:a.hourForecast.air_quality.so2,o3:a.hourForecast.air_quality.o3,pm2_5:a.hourForecast.air_quality.pm2_5,pm10:a.hourForecast.air_quality.pm10,gbIndex:a.hourForecast.air_quality["gb-defra-index"],usIndex:a.hourForecast.air_quality["us-epa-index"]},chanceOfRain:a.hourForecast.daily_chance_of_rain,chanceOfSnow:a.hourForecast.daily_chance_of_snow,cloud:a.hourForecast.cloud,des:a.hourForecast.condition.text,icon:a.hourForecast.condition.icon,code:a.hourForecast.condition.code,dewPointC:a.hourForecast.dewpoint_c,dewPointF:a.hourForecast.dewpoint_f,diffRad:a.hourForecast.diff_rad,dni:a.hourForecast.dni,feelsLikeC:a.hourForecast.feelslike_c,feelsLikeF:a.hourForecast.feelslike_f,gti:a.hourForecast.gti,gust:a.hourForecast.gust_kph,heatIndexC:a.hourForecast.heatindex_c,heatIndexF:a.hourForecast.heatindex_f,humidity:a.hourForecast.humidity,precip:a.hourForecast.precip_mm,pressure:a.hourForecast.pressure_mb,tempC:a.hourForecast.temp_c,tempF:a.hourForecast.temp_f,time:a.hourForecast.time,timeEpoch:a.hourForecast.time_epoch,uvIndex:a.hourForecast.uv,visibility:a.hourForecast.vis_km,windDegree:a.hourForecast.wind_degree,windDirection:a.hourForecast.wind_dir,windSpeed:a.hourForecast.wind_kph,tempScale:"c"},a.record}catch(e){throw e}},n=function(){if(!a.record||0===Object.keys(a.record).length)throw Error("No weather data available. Please search for a city first.");return a.record.tempScale="c"===a.record.tempScale?"f":"c",a.record};class o{_data;_initialMarkup;saveInitialMarkup(){this._initialMarkup||(this._initialMarkup=this._parentElement.innerHTML)}render(e){e&&(this._data=e,this._renderForecast())}_clear(){this._parentElement.innerHTML=""}_renderIcons(){let e=this._parentElement.querySelector("[data-climate-icon]"),t=this._parentElement.querySelector("[data-climate-img]");e.classList.add("hidden"),t.classList.remove("hidden"),t.src=this._data.curIcon,t.alt=this._data.curText}_updateElements(e){e.forEach(({selector:e,content:t,attribute:a="textContent"})=>{let r=this._parentElement.querySelector(e);r&&("textContent"===a?r.textContent=t:r.setAttribute(a,t))})}_renderDegScale(e,t){return"c"===this._data.tempScale?e:t}renderSpinner(){let e=this._displayElement||this._parentElement,t=`
      <div class="spinner" id="weather-spinner">
        <i data-lucide="loader"></i>
      </div>
    `;e.innerHTML="",e.insertAdjacentHTML("afterbegin",t),window.lucide&&window.lucide.createIcons()}renderError(e){let t=`
        <div class="error">
          <div>
            <i data-lucide="circle-x"></i>
          </div>
          <p>${e}</p>
        </div>
    `,a=this._displayElement||this._parentElement;a.innerHTML="",a.insertAdjacentHTML("afterBegin",t)}restoreInitial(){let e=this._displayElement||this._parentElement;this._initialMarkup&&(e.innerHTML=this._initialMarkup)}}class i extends o{_parentElement=document.getElementById("input__city");getQuery(){let e=this._parentElement.value.toLowerCase().trim();return this._parentElement.value="",this._parentElement.blur(),e}addHandlerLocation(e){document.querySelector(".navbar__search").addEventListener("submit",t=>{t.preventDefault();let a=this.getQuery();if(!a)return alert("Please enter the city name");e(a)})}addHandler(e){document.addEventListener("DOMContentLoaded",e)}}var s=new i;class c extends o{_parentElement=document.querySelector(".sidebar");_displayElement=this._parentElement.querySelector("[data-location]");_renderForecast(){this._renderIcons();let e=`${this._data.location.city}, ${this._data.location.region}, ${this._data.location.country}`,t=Math.round(this._renderDegScale(this._data.tempC,this._data.tempF)),a=this._renderDegScale("C","F"),r=Math.round(this._renderDegScale(this._data.minTempC,this._data.minTempF)),n=Math.round(this._renderDegScale(this._data.maxTempC,this._data.maxTempF));this._updateElements([{selector:"[data-location]",content:e},{selector:"[data-currTemp]",content:t},{selector:"[data-tempDeg]",content:a},{selector:"[data-weekday]",content:this._data.location.curWeekDay},{selector:"[data-time]",content:this._data.location.curTime},{selector:"[data-climate-des]",content:this._data.des},{selector:"[data-mintemp]",content:r},{selector:"[data-maxtemp]",content:n},{selector:"[data-sunrise]",content:this._data.sunrise},{selector:"[data-sunset]",content:this._data.sunset}])}}var d=new c;class l extends o{_parentElement=document.querySelector(".week-report--js");_renderForecast(){this._clear();let e=this._renderMarkup();this._parentElement.insertAdjacentHTML("afterbegin",e)}_renderMarkup(){return`
          <h1 class="heading-1">This Week Weather Report</h1>
          <div class="content__report--card-container">
          ${this._data.forecast.map(this._renderMarkupGenerator.bind(this)).join("")}
          </div>
    `}_renderMarkupGenerator(t){let a=e(t.date).month,r=e(t.date).day,n=e(t.date).shortWeekDay,o=t.day.condition.icon,i=t.day.condition.text,s=Math.round(this._renderDegScale(t.day.maxtemp_c,t.day.maxtemp_f)),c=Math.round(this._renderDegScale(t.day.mintemp_c,t.day.mintemp_f));return`
            <div class="day__card">
                <div class="day__card--date">
                  <span>${r} ${a}</span>
                  <span>${n}</span>
                </div>
                <div class="day__card--climate">
                  <img class="icon icon--gold-fill" src="${o}" alt="${i}">
                  <span>${c}&deg; / ${s}&deg;</span>
                </div>
            </div>
        `}}var u=new l;class h extends o{_parentElement=document.querySelector(".forecast-container");_renderForecast(){let e=Math.round(this._renderDegScale(this._data.feelsLikeC,this._data.feelsLikeF)),t=Math.trunc(this._data.uvIndex),{windSpeed:a}=this._data,{windDirection:r}=this._data,{visibility:n}=this._data,{cloud:o}=this._data,{precip:i}=this._data,{humidity:s}=this._data,c=this._data.aqi.usIndex,d="c"===this._data.tempScale?"C":"F",l=((e,t="C")=>{let a="C"===t?[0,11,21,26,31,36]:[32,51,69,78,87,96],r=["Freezing","Cold","Cool","Pleasant","Warm","Hot","Very Hot"];for(let t=0;t<a.length;t++)if(e<a[t])return r[t];return r[r.length-1]})(e,d);this._updateElements([{selector:"[data-feelslike]",content:`${e}\xb0`},{selector:"[data-tempDeg]",content:d},{selector:"[data-feelslike-des]",content:l},{selector:"[data-uv-index]",content:t},{selector:"[data-uv-index-des]",content:0===t?"Excellent":t<=2?"Low":t<=5?"Moderate":t<=7?"High":t<=10?"Very High":"Extreme"},{selector:"[data-wind-speed]",content:a},{selector:"[data-wind-dir]",content:r},{selector:"[data-cloud]",content:o},{selector:"[data-cloud-des]",content:o<=10?"Clear":o<=25?"Mostly Clear":o<=50?"Partly Cloudy":o<=69?"Mostly Cloudy":o<=89?"Overcast":"Very Overcast"},{selector:"[data-precip]",content:i},{selector:"[data-precip-des]",content:0===i?"No Rain":i<=2.5?"Light Rain":i<=7.5?"Moderate Rain":i<=50?"Heavy Rain":"Very Heavy Rain"},{selector:"[data-vis]",content:n},{selector:"[data-vis-des]",content:n>10?"Clear":n>=6?"Mostly Clear":n>=4?"Slightly Hazy":n>=2?"Hazy":n>=1?"Low Visibility":"Very Low Visibility"},{selector:"[data-humidity]",content:s},{selector:"[data-humidity-des]",content:s<=30?"Dry":s<=50?"Comfortable":s<=65?"Slightly Humid":s<=75?"Humid":s<=85?"Very Humid":"Oppressive"},{selector:"[data-aqi-us]",content:c},{selector:"[data-aqi-us-des]",content:(e=>{switch(e){case 1:return"Good";case 2:return"Moderate";case 3:return"Sensitive";case 4:return"Unhealthy";case 5:return"Very Unhealthy";case 6:return"Hazardous";default:return"Unknown"}})(c)}])}}var m=new h;class _ extends o{_parentElement=document.getElementById("get-geolocation");addHandlerGeoLocation(e){this._parentElement.addEventListener("click",e)}}var p=new _;class y extends o{_parentElement=document.querySelector(".temp__box-btns");_slider=this._parentElement.querySelector(".slider__btn");_celsiusBtn=document.querySelector(".temp__btn-C");_fahrenheitBtn=document.querySelector(".temp__btn-F");addHandlerToggleScale(e){this._parentElement.addEventListener("click",t=>{let a=t.target.closest(".temp__btn");a&&(a.classList.contains("active")||e())})}updateActiveBtn(e){"c"===e?(this._celsiusBtn.classList.add("active"),this._fahrenheitBtn.classList.remove("active"),this._slider.classList.remove("slide-right")):(this._celsiusBtn.classList.remove("active"),this._fahrenheitBtn.classList.add("active"),this._slider.classList.add("slide-right"))}}var g=new y;const F=async function(){try{d.renderSpinner();let e=await new Promise(function(e,t){if(!navigator.geolocation)return void t(Error("Geolocation is not supported in this Browser"));navigator.geolocation.getCurrentPosition(t=>{let{latitude:a,longitude:r}=t.coords;e(`${a},${r}`)},e=>t(e))});if(!e)throw Error("Unable to retrieve geolocation");v(e)}catch(e){d.renderError(e.message),u.restoreInitial(),m.restoreInitial()}},v=async function(e){try{if(!e||"string"!=typeof e)throw Error("Please enter a valid city name");d.renderSpinner(),u.renderSpinner();let t=await r(e);d.render(t),u.render(t),m.render(t),g.updateActiveBtn(t.tempScale)}catch(e){d.renderError(e.message),u.restoreInitial()}};document.addEventListener("DOMContentLoaded",function(){u.saveInitialMarkup(),d.saveInitialMarkup(),m.saveInitialMarkup()}),s.addHandlerLocation(v),p.addHandlerGeoLocation(F),g.addHandlerToggleScale(function(){try{let e=n();if(!e)return;g.updateActiveBtn(e.tempScale),d.render(e),u.render(e),m.render(e)}catch(e){d.renderError(e.message)}});
//# sourceMappingURL=flying-Nimbus.a1eb4c9e.js.map
